


<LoginPage>:
    GridLayout:
        rows:8
        Image:
            source:'image/sidex_logo.png'
        BoxLayout:
            size_hint_y:0.1
            orientaion:"horizontal"
            Label:
                size_hint_x:1.5
            Label:
                text:"User Name:"
                halign:"right"
                valign:"center"
                text_size: self.size

            TextInput:
                id: usrname
                hint_text:'User Name'
            Label:
                size_hint_x:2
        BoxLayout:
            size_hint_y:0.1
            orientaion:"horizontal"
            Label:
                size_hint_x:1.5
            Label:
                text:"Password:"
                halign:"right"
                valign:"center"
                text_size: self.size
            TextInput:
                id: passw
                hint_text:'Password'
                password: True # hide password
            Label:
                size_hint_x:2
        BoxLayout:
            size_hint_y:0.1
            orientaion:"horizontal"
            Label:
                size_hint_x:1.5
            FloatLayout:
                size_hint_x:0.4
                Spinner:
                    size_hint_y: None
                    size:280, 44
                    pos_hint: {'center': (.5, -.05)}
                    text: 'Select Monitor'
                    values: root.screens
                    opacity:0 if root.disableshowscreen else 1
                    on_text:root.onscreen(self.text)
            Label:
                size_hint_x:0.6
            FloatLayout:
                Spinner:
                    size_hint_y: None
                    size:280, 44
                    pos_hint: {'center': (.5, -.05)}
                    text: 'Select Project'
                    values: root.values
                    opacity:0 if root.disableshow else 1
                    on_text:root.onproject(self.text)
            Label:
                size_hint_x:2
        GridLayout:
            cols:4
            padding:140
            Label:
                size_hint_x:2.5
            Button:
                on_release: root.verify_credentials()
                background_normal:'image/Login-button.png'
                background_down:'image/Login-button.png'
                opacity:1 if root.disableshow else 0
                disabled:0 if root.disableshow else 1
                size_hint_y:None
                size:80,120
            Label:
                size_hint_x:2
        Label:
            text:root.stateconnect
            size_hint_y:0.05


<MainPage>:
    BoxLayout:
        orientation:"horizontal"

<CoreApp>:

    cols: 3
    padding: 20
    spacing: 20
    SettingMenu:
        size_hint_x:0.03
        id:setting_menu
    GridLayout:
        rows:4
        spacing:20
        BoxLayout:
            size_hint_y:0.04
            orientation:'horizontal'
            Label:
                size_hint_x:0.2
                font_name:'fonts/times.ttf'
                font_size:self.height*0.9
                markup: True
                text:"Disable"
            CheckBox:
                id:disable_check
                size_hint_x: 0.05
                group: 'check'
                active:root.actdisable
                on_release:root.disablecheck(self.active)

            BoxLayout:
                size_hint_x:0.3
                Label:
                    color:root.colorwhite if root.connection else root.colorerror
                    text:"Online" if root.connection else "Offline"
                    font_name:'fonts/times.ttf'
                    font_size:self.height*0.9
                    markup: True
                    pos_hint: {'x': 0, 'y': -0.3}
            BoxLayout:
                size_hint_x:0.2
                Image:
                    source:root.statesend
                    pos_hint: {'x': 0, 'y': -0.3}
                    opacity:0 if root.statesend=="" else 1
                Image:
                    source:"image/outofservice.png"
                    opacity:1 if root.offlineHardware else 0
                    pos_hint: {'x': 0, 'y': -0.3}
            BoxLayout:
                size_hint_x:0.2
                Image:
                    source:"image/auto_config.png"
                    pos_hint: {'x': 0, 'y': -0.3}
                    opacity:1 if root.autoconfig else 0
            BoxLayout:
                Label:
                    text:root.PrjName
                    font_name:'fonts/times.ttf'
                    font_size:self.height*1.5
                    markup: True
                    pos_hint: {'x': 0, 'y': -0.3}
            BoxLayout:
                size_hint_x:0.2
                Button:
                    id:key_gsm
                    text:"Reset GSM"
                    font_name:'fonts/times.ttf'
                    font_size:self.height*0.7
                    pos_hint: {'x': -1, 'y': -0.3}
                    on_press:root.ResetGSMModem()
            BoxLayout:
                size_hint_x:0.1
                Label:
                    text:root.operator
                    font_name:'fonts/times.ttf'
                    font_size:self.height*0.6
                    markup: True
                    pos_hint: {'x': 0, 'y': -0.3}


            BoxLayout:
                size_hint_x:0.05
                Label:
                    text:root.actsate
                    font_name:'fonts/times.ttf'
                    font_size:self.height*0.7
                    markup: True
                    pos_hint: {'x': 0, 'y': -0.3}

            BoxLayout:
                size_hint_x:0.1
                Image:
                    source:root.SigGSM
                    pos_hint: {'x': 0, 'y': -0.7}
                    size_hint:1,2

        GridLayout:
            cols: 4
            size_hint_y:0.05
            spacing:0
            canvas.before:
                Color:
                    rgba: root.colorborder
                Line:
                    width: 1
                    rectangle: self.parent.x, self.parent.y, self.parent.width, self.parent.height

            Label:
                text: 'Elevator Group'
                font_name:'fonts/times.ttf'
                font_size:self.height*0.75
                markup: True
                halign: 'left'
                valign: 'middle'
                canvas:
                    Color:
                        rgba: root.colorback
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Button:
                text:'A-D'
                font_name:'fonts/times.ttf'
                size_hint_x:0.2
                on_press:root.ChangeGroupAD()
                font_size:self.height*0.75
                color:root.white if root.ElevGrp == 0 else root.black

            Button:

                size_hint_x:0.2
                font_name:'fonts/times.ttf'
                text: 'E-G'
                on_press:root.ChangeGroupEG()
                font_size:self.height*0.75
                color:root.white if root.ElevGrp == 1 else root.black
            Button:
                size_hint_x:0.2
                font_name:'fonts/times.ttf'
                text: 'H-L'
                on_press:root.ChangeGroupHK()
                font_size:self.height*0.75
                color:root.white if root.ElevGrp == 2 else root.black

        GridLayout:
            rows:2

            BoxLayout:
                orientation:"horizontal"
                spacing:20
                size_hint_y:0.25
                Button:
                    id:reset_all
                    size_hint_x:0.3
                    canvas:
                        Color:
                            rgba: 0,0,0,1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    on_press:root.resetall()
                    Image:
                        source: "image/Reset.PNG"
                        center: self.parent.center_x,self.parent.center_y
                        size_hint_y:None
                        width:self.parent.width/1.2
                ElevatorUP:
                    index:1
                    id:elev_up1
                ElevatorUP:
                    index:2
                    id:elev_up2
                ElevatorUP:
                    index:3
                    id:elev_up3
                ElevatorUP:
                    index:4
                    id:elev_up4
                FloatLayout:
                    size_hint_y:0.4
                    size_hint_x:0.8
                    Image:
                        source:'image/sidex_logo.png'
                        center: self.parent.center_x,self.parent.center_y+self.height/2
                        size_hint_y:None
                        width:self.parent.width/1.2



            ScrollView:
                do_scroll_x: False
                FloorsSegment:
                    id:floors
                    numhall:root.numhall
                    numelev:root.numelev
                    totallheight:self.parent.height

                    cols:1
        BoxLayout:
            orientation:"horizontal"
            size_hint_y:0.025
            canvas.before:
                Color:
                    rgba: root.colorborder
                Line:
                    width: 1
                    rectangle: self.x, self.y, self.width, self.height+10
            Label:
                color:root.colorwhite if root.offlineHardware == 0 else root.colorerror
		        text:"Date: "+str(root.date)
		        font_name:'fonts/times.ttf'
				font_size:self.height*1.1
				pos_hint: {'x': 0, 'y': 0.35}
            Label:
                color:root.colorwhite if root.offlineHardware == 0 else root.colorerror
		        text:"Time: "+str(root.time)
		        font_name:'fonts/times.ttf'
				font_size:self.height*1.1
				pos_hint: {'x': 0, 'y': 0.35}
            Label:

		        text:"Elevator Number: "+str(root.numelev)
		        font_name:'fonts/times.ttf'
				font_size:self.height*1.1
				pos_hint: {'x': 0, 'y': 0.35}
            Label:
		        text:"Hall Number: "+str(root.numhall)
		        font_name:'fonts/times.ttf'
				font_size:self.height*1.1
				pos_hint: {'x': 0, 'y': 0.35}
            Label:
		        text:"Project Code:"+str(root.project_code)
		        font_name:'fonts/times.ttf'
				font_size:self.height*1.1
				pos_hint: {'x': 0, 'y': 0.35}
            Label:
		        text: "Delta:"+str(root.delta)+str("  ms")
		        font_name:'fonts/times.ttf'
				font_size:self.height*1.1
				pos_hint: {'x': 0, 'y': 0.35}






    InfoPanel:
        id:info
        size_hint_x: 0.3










<FloorsSegment>:
    size_hint_y:None
    height:self.minimum_height

<FloorCell>:
    orientation:"horizontal"
    size_hint_y: None
    height: '50sp'
    spacing:20
    totallheight:self.totallheight

<PopupError>:
    rows:2
    Label:
        text:root.message
        font_size:20
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        Button:
            size_hint:None,None
            width:100
            height:50
            text:"Exit"
            on_release:root.on_press_exit()


<LoadingScreen>:
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        Image:
            id: gif
            source: "image/loading-animation.gif"
            center: self.parent.center
            size: 500, 500

            allow_stretch: True
            anim_delay:0
