
<FloorsLabel>:

    text:self.floorname
    font_name:'fonts/times.ttf'
    halign: 'left'
    valign: 'middle'
    markup : True
    font_size:'30sp'
    canvas.before:
        Color:
            rgba: root.colorborder
        Line:
            width: 1
            points: self.x, self.y+self.height, self.x+ self.width+20, self.y+self.height




<HallCallDiv>:
    cols:2
    BoxLayout:
        orientation:'horizontal'
        size_hint_x:1.5
        BoxLayout:
            orientation:'horizontal'
            AnchorLayout:
                size_hint_x:1
                padding:5
                anchor_x: 'center'
                anchor_y: 'center'
                Image:
                    source:"image/please_wait.png"
                    opacity:1 if root.pleasewait else 0
            AnchorLayout:
                size_hint_x:1
                padding:5
                anchor_x: 'center'
                anchor_y: 'center'
                Image:
                    source:"image/disable_panel.png"
                    opacity:1 if root.disable_panel else 0
            AnchorLayout:
                size_hint_x:1
                padding:5
                anchor_x: 'center'
                anchor_y: 'center'
                Image:
                    source:"image/rfid_write.png"
                    opacity:1 if root.writeid else 0

            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                Connection:
                    floor:root.floor
                    id:connection


            AnchorLayout:

                anchor_x: 'center'
                anchor_y: 'center'
                QualityConnection:
                    floor:root.floor
                    id:quality


    Panels:
        id:panels
        canvas.before:
            Color:
                rgba: root.colorborder
            Line:
                width: 1
                points: self.x-290, self.y+self.height, self.x+ self.width, self.y+self.height

        floor:root.floor


<PopupWindow>:
    rows:1
    GridLayout:
        cols:3
        padding:10

        GridLayout:
            padding:10
            spacing:10
            canvas.before:
                Color:
                    rgba: root.colorwhite
                Line:
                    width: 1.5
                    rounded_rectangle: self.x, self.y, self.width, self.height,10
            rows:6
            GridLayout:
                cols:4
                size_hint_y:0.12
                TextInput:
                    hint_text:"Hall Index Name"
                    id:HallIndex
                TextInput:
                    hint_text:"Parallel Panel"
                    id:ParPanel
                Button:
                    text:"Config Setup"
                    on_press:root.Select_Setup()
                Button:

                    background_normal:'image/Reset.png'
                    size_hint_x:0.6
                    on_press:root.Select_Reset()


            PopupElevatorPanel:
                floor:root.floor
                parID:root.parID
                size_hint_y:0.25
                id:elevators

            GridLayout:
                cols:8
                size_hint_y:0.001 if root.monitoring else 0.02
                opacity:0 if root.monitoring else 1
                Label:
                    size_hint_x:0.4
                Label:
                    text:"Disable Panel"

                CheckBox:
                    size_hint_x:0.1
                    on_release:root.disablecheck(self.active)
                    active:root.disablepanel

                Label:
                    size_hint_x:0.2
                Label:
                    size_hint_x:0.8



            PopupPushButtons:
                id:floors
                floor:root.floor
                parID:root.parID


            PopupResrveKeys:
                id:res_keys
                floor:root.floor
                size_hint_y:0.1
            PopupIDCARDPanel:
                floor:root.floor
                parID:root.parID
                size_hint_y:0.1



<PopupElevatorPanel>:
    padding:10
    spacing:20
    cols:3
    GridLayout:
        cols:1
        padding:15

        HallLocation:
            floor:root.floor
            parID:root.parID
            left:True
    ElevatorPush:
        id:elevator_push
        size_hint_x:1.5
        text:""


        disable:True
        elevatorpanel:True
        floor:root.floor
    GridLayout:
        cols:1
        padding:15
        HallLocation:
            parID:root.parID
            floor:root.floor
            left:False
            id:hall_location

<ResrveKey>:
    on_text:root.onselect(self.text)


<HallLocation>:

    canvas.before:
        Color:
            rgba: root.colorwhite if self.disable==0 else root.colordisable
        Line:
            width: 1.5
            rounded_rectangle: self.x, self.y, self.width, self.height,10
    on_press:self.Select_Button()
    source:"image/raw.png"
    Label:
        text:str(root.HallParID) if root.disable==0 else ""
        center:self.parent.center
        font_size:self.height*0.5



<ElevatorPush>:
    source:self.sourcepng
    on_press:self.Select_Button()
    Label:
        text:str(root.Elevatorname) if root.elevatorpanel==1 else ""
        center_x:self.parent.center_x
        center_y:self.parent.center_y+35
        font_size:self.height*0.15



<PopupIDCARDPanel>:
    cols:4
    TextInput:
        size_hint_x:0.8
        hint_text:"Index ID"
        id:IndexID
    PopupIDCARButton:
        id:write
        sourceimage:"image/rfid_write"
        size_hint_x:1
    PopupIDCARButton:
        id:vip
        sourceimage:"image/vip"
        size_hint_x:1
    Button:
        text:"Config ID CARD"
        on_press:root.Config_Button()


<PopupIDCARButton>:
    source:self.sourceimage
    on_press:self.Select_Button()




<HallButton>:
    background_color: root.colorblack
    canvas.before:
        Color:
            rgba: root.colorwhite if self.Av==1 else root.colordisable
        Line:
            width: root.widthline
            rounded_rectangle: self.x, self.y, self.width, self.height,5
    text:self.floorname
    color:root.colorwhite if self.Av==1 else root.colordisable
    font_size:self.height*0.8
    opacity:1 if self.show==1 else 0
    on_press:root.UpdateAvailable()